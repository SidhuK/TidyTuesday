x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("Top panel shows cumulative sum of all packages on CRAN. Zoomed panel (bottom, gold line) displays trends in packages that contain 'tidy' in name.", width = 50),
caption = "Figure: Sean Bock\nData: Robert Flight\nCode: https://github.com/Sdbock/tidytuesday") +
theme(
plot.background = element_rect(fill = "#3a3d72",color = "#3a3d72"),
panel.background = element_rect(fill = "#3a3d72",color = "#3a3d72"),
text = element_text(color = "white", family = "Helvetica"),
axis.text = element_text(color = "white"),
plot.title = element_text(size = 18),
panel.grid.major.x = element_blank(),
panel.grid.minor.y = element_blank(),
panel.grid.minor.x = element_blank(),
panel.grid.major.y = element_line(linetype = "dotted"),
axis.line.x = element_line(color = "white", size = .2),
axis.line.y = element_line(color = "white", size = .2),
axis.ticks = element_blank(),
plot.caption = element_text(hjust = 0)
)
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +
geom_line(data = counts_tidy, aes(x = date, y = cumsum), color = "#ccb144", size = 2) +
labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("Top panel shows cumulative sum of all packages on CRAN. Zoomed panel (bottom, gold line) displays trends in packages that contain 'tidy' in name.", width = 50),
caption = "Figure: Sean Bock\nData: Robert Flight\nCode: https://github.com/Sdbock/tidytuesday") +
theme()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
ggThemeAssist:::ggThemeAssistAddin()
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +
geom_line(data = counts_tidy, aes(x = date, y = cumsum), color = "#ccb144", size = 2) +
labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("Top panel shows cumulative sum of all packages on CRAN. Zoomed panel (bottom, gold line) displays trends in packages that contain 'tidy' in name.", width = 50),
caption = "Figure: Sean Bock\nData: Robert Flight\nCode: https://github.com/Sdbock/tidytuesday") +
theme())
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +
geom_line(data = counts_tidy, aes(x = date, y = cumsum), color = "#ccb144", size = 2) +
labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("Top panel shows cumulative sum of all packages on CRAN. Zoomed panel (bottom, gold line) displays trends in packages that contain 'tidy' in name.", width = 50),
caption = "Figure: Sean Bock\nData: Robert Flight\nCode: https://github.com/Sdbock/tidytuesday") +
theme()
ggThemeAssist:::ggThemeAssistAddin()
# Get the Data
# Read in with tidytuesdayR package
# Install from CRAN via: install.packages("tidytuesdayR")
# This loads the readme and all the datasets for the week of interest
# Either ISO-8601 date or year/week works!
#Dataset Description:
#variable	class	description
#package	character	Package name
#version	character	Pkg version number
#date	datetime	Date and time when package was uploaded/updated
#rnw	integer	RNW (Sweave) based vignette count
#rmd	integer	RMD based vignette count
#Load the packages needed.
library(tidytuesdayR)
library(ggplot2)
library(tidyverse)
library(lubridate)
library(skimr)
library(patchwork)
library(ggThemeAssist)
library(ggtext)
library(scales)
# read the data using tidytuesdayR
tt <- tidytuesdayR::tt_load('2022-03-15')
# rename the data to a new dataframe
cran <- tt$cran
# data at a glance
glimpse(cran)
cran_summary <- skim(cran)
## cleaning up date variable
cran_r <-cran %>%
mutate(
date_clean = as.Date(date),
date_clean = if_else(
is.na(date_clean),
as.Date(date, format = "%c"),
date_clean
)
) %>%
filter(!is.na(date_clean)) %>%
select(-date) %>%
rename(
date = date_clean
) %>%
group_by(package) %>%
slice(1) %>%
select(package,date)
counts_overall <-
cran_r %>%
arrange(date) %>%
ungroup() %>%
mutate(cumsum = row_number())
counts_tidy <-
cran_r %>%
filter(str_detect(package,"tidy")) %>%
arrange(date) %>%
ungroup() %>%
mutate(cumsum = row_number())
# Make plot
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +
geom_line(data = counts_tidy, aes(x = date, y = cumsum), color = "#ccb144", size = 2) +
labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("Top panel shows cumulative sum of all packages on CRAN. Zoomed panel (bottom, gold line) displays trends in packages that contain 'tidy' in name.", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("Top panel shows cumulative sum of all packages on CRAN. Zoomed panel (bottom, gold line) displays trends in packages that contain 'tidy' in name.", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
?title
ggThemeAssist:::ggThemeAssistAddin()
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme() + theme(plot.subtitle = element_text(face = "italic",
colour = "gray24", hjust = 0.45), plot.caption = element_text(size = 6,
face = "italic", hjust = 0), axis.ticks = element_line(size = 1),
panel.grid.major = element_line(size = 0.4,
linetype = "dashed"), panel.grid.minor = element_line(size = 0.3,
linetype = "dotdash"), axis.text = element_text(size = 12),
plot.title = element_text(size = 15,
face = "bold", hjust = 0.45), panel.background = element_rect(fill = "gray91",
colour = "black", size = 1, linetype = "solid"),
plot.background = element_rect(fill = "antiquewhite2",
colour = "black", size = 1.1, linetype = "solid")) +labs(title = "CRAN Packages", y = "Total Packages")
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme() + theme(plot.subtitle = element_text(face = "italic",
colour = "gray24", hjust = 0.45), plot.caption = element_text(size = 6,
face = "italic", hjust = 0), axis.ticks = element_line(size = 1),
panel.grid.major = element_line(size = 0.4,
linetype = "dashed"), panel.grid.minor = element_line(size = 0.3,
linetype = "dotdash"), axis.text = element_text(size = 12),
plot.title = element_text(size = 15,
face = "bold", hjust = 0.45), panel.background = element_rect(fill = "gray91",
colour = "black", size = 1, linetype = "solid"),
plot.background = element_rect(fill = "antiquewhite2",
colour = "black", size = 1.1, linetype = "solid")) +labs(title = "CRAN Packages", y = "Total Packages")
View(cran_r)
# Get the Data
# Read in with tidytuesdayR package
# Install from CRAN via: install.packages("tidytuesdayR")
# This loads the readme and all the datasets for the week of interest
# Either ISO-8601 date or year/week works!
#Dataset Description:
#variable	class	description
#package	character	Package name
#version	character	Pkg version number
#date	datetime	Date and time when package was uploaded/updated
#rnw	integer	RNW (Sweave) based vignette count
#rmd	integer	RMD based vignette count
#Load the packages needed.
library(tidytuesdayR)
library(ggplot2)
library(tidyverse)
library(lubridate)
library(skimr)
library(patchwork)
library(ggThemeAssist)
library(ggtext)
library(scales)
# read the data using tidytuesdayR
tt <- tidytuesdayR::tt_load('2022-03-15')
# rename the data to a new dataframe
cran <- tt$cran
# data at a glance
glimpse(cran)
cran_summary <- skim(cran)
## cleaning up date variable
cran_r <-cran %>%
mutate(
date_clean = as.Date(date),
date_clean = if_else(
is.na(date_clean),
as.Date(date, format = "%c"),
date_clean
)
) %>%
filter(!is.na(date_clean)) %>%
select(-date) %>%
rename(
date = date_clean
) %>%
group_by(package) %>%
slice(1) %>%
select(package,date)
# Make plot
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme() + theme(plot.subtitle = element_text(face = "italic",
colour = "gray24", hjust = 0.45), plot.caption = element_text(size = 6,
face = "italic", hjust = 0), axis.ticks = element_line(size = 1),
panel.grid.major = element_line(size = 0.4,
linetype = "dashed"), panel.grid.minor = element_line(size = 0.3,
linetype = "dotdash"), axis.text = element_text(size = 12),
plot.title = element_text(size = 15,
face = "bold", hjust = 0.45), panel.background = element_rect(fill = "gray91",
colour = "black", size = 1, linetype = "solid"),
plot.background = element_rect(fill = "antiquewhite2",
colour = "black", size = 1.1, linetype = "solid")) +labs(title = "CRAN Packages", y = "Total Packages")
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "pink", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Cumulative sum of packages",
x = NULL,
title = "Development of 'tidy' packages on CRAN",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme() + theme(plot.subtitle = element_text(face = "italic",
colour = "gray24", hjust = 0.45), plot.caption = element_text(size = 6,
face = "italic", hjust = 0), axis.ticks = element_line(size = 1),
panel.grid.major = element_line(size = 0.4,
linetype = "dashed"), panel.grid.minor = element_line(size = 0.3,
linetype = "dotdash"), axis.text = element_text(size = 12),
plot.title = element_text(size = 15,
face = "bold", hjust = 0.45), panel.background = element_rect(fill = "gray91",
colour = "black", size = 1, linetype = "solid"),
plot.background = element_rect(fill = "antiquewhite2",
colour = "black", size = 1.1, linetype = "solid")) +labs(title = "CRAN Packages", y = "Total Packages")
ggplot.save()
install.packages("magick")
inset_element(p = logo_raw,
left = 0.5,
bottom = 0.55,
right = 0.95,
top = 0.95)
# Get the Data
# Read in with tidytuesdayR package
# Install from CRAN via: install.packages("tidytuesdayR")
# This loads the readme and all the datasets for the week of interest
# Either ISO-8601 date or year/week works!
#Dataset Description:
#variable	class	description
#package	character	Package name
#version	character	Pkg version number
#date	datetime	Date and time when package was uploaded/updated
#rnw	integer	RNW (Sweave) based vignette count
#rmd	integer	RMD based vignette count
#Load the packages, not using most of them, just easy to have it all loaded.
library(tidytuesdayR)
library(ggplot2)
library(tidyverse)
library(lubridate)
library(skimr)
library(patchwork)
library(ggThemeAssist)
library(ggtext)
library(scales)
library(magick)
# read the data using tidytuesdayR
tt <- tidytuesdayR::tt_load('2022-03-15')
# rename the data to a new dataframe
cran <- tt$cran
# data at a glance
glimpse(cran)
cran_summary <- skim(cran)
## cleaning up date variable
cran_r <-cran %>%
mutate(
date_clean = as.Date(date),
date_clean = if_else(
is.na(date_clean),
as.Date(date, format = "%c"),
date_clean
)
) %>%
filter(!is.na(date_clean)) %>%
select(-date) %>%
rename(
date = date_clean
) %>%
group_by(package) %>%
slice(1) %>%
select(package,date)
# ggplot logo
logo_raw <- image_read("http://hexb.in/hexagons/ggplot2.png")
# Making the actual plot
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
inset_element(p = logo_raw,
left = 0.5,
bottom = 0.55,
right = 0.95,
top = 0.95)
counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
plot <- counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
plot
install.packages("cowplot")
library(cowplot)
image <- system.file("logo.png")
plot + draw_image(image = image,x = 1, y = 1, hjust = 1, vjust = 1, width = 0.13, height = 0.2)
plot + draw_image(image,x = 1, y = 1, hjust = 1, vjust = 1, width = 0.13, height = 0.2)
# ggplot logo
image <- image_read("logo.png")
plot + draw_image("logo.png",x = 1, y = 1, hjust = 1, vjust = 1, width = 0.13, height = 0.2)
plot + draw_image("logo.png",x = 1, y = 1, hjust = 1, vjust = 1, width = 0.13, height = 0.2)
image <- image_read("https://ggplot2.tidyverse.org/logo.png")
image_info(image)
plot %>% image_composite(image, offset = "+22+1826")
# ggplot logo
ggplot_logo <- image_read("https://ggplot2.tidyverse.org/logo.png")
image_info(ggplot_logo)
plot %>% image_composite(ggplot_logo, offset = "+22+1826")
grid::grid.raster(ggplot_logo, x = 0.07, y = 0.03, just = c('left', 'bottom'), width = unit(1, 'inches'))
grid::grid.raster(ggplot_logo, x = 0.07, y = 0.03, just = c('left', 'bottom'), width = unit(0.5, 'inches'))
grid::grid.raster(ggplot_logo, x = 0.07, y = 0.03, just = c('left', 'bottom'), width = unit(0.25, 'inches'))
source("~/Google Drive/Code/TidyTuesday/2022/March_15/March_15_2022.R")
counts_overall <-
cran_r %>%
arrange(date) %>%
ungroup() %>%
mutate(cumsum = row_number())
# ggplot logo
ggplot_logo <- image_read("https://ggplot2.tidyverse.org/logo.png")
image_info(ggplot_logo)
plot <- counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
grid::grid.raster(ggplot_logo, x = 0.07, y = 0.03, just = c('left', 'bottom'), width = unit(0.25, 'inches'))
plot
grid::grid.raster(ggplot_logo, x = 0.07, y = 0.03, just = c('left', 'bottom'), width = unit(0.25, 'inches'))
View(counts_overall)
plot <- counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme_dark()
plot
plot <- counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme()
plot
ggThemeAssist:::ggThemeAssistAddin()
plot <- counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "grey", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme() + theme(plot.subtitle = element_text(size = 10,
face = "bold", colour = "gray0", hjust = 0.5),
plot.caption = element_text(size = 7,
face = "italic", colour = "gray0"),
axis.ticks = element_line(colour = "gray0",
size = 0.9), panel.grid.major = element_line(colour = "gray96",
size = 0.4, linetype = "dashed"),
panel.grid.minor = element_line(size = 0.4,
linetype = "dashed"), axis.title = element_text(face = "bold"),
axis.text = element_text(family = "mono",
colour = "gray0"), plot.title = element_text(size = 18,
face = "bold", hjust = 0.5), panel.background = element_rect(fill = "antiquewhite2",
colour = "black", size = 1, linetype = "longdash"),
plot.background = element_rect(fill = "aliceblue",
colour = "black", size = 1.5, linetype = "solid"),
legend.position = "none") +labs(x = "Year")
plot
plot <- counts_overall %>%
ggplot(aes(x = date, y = cumsum)) +
geom_line(color = "black", size = 1.5) +
scale_x_date(breaks = date_breaks("4 year"),
labels = date_format("%Y")) +  labs(y = "Total Number of Packages",
x = NULL,
title = "CRAN Packages",
subtitle = str_wrap("The figure shows sum of all packages on CRAN over a period of time. ", width = 50),
caption = "Figure: Karat Sidhu\nData: Robert Flight\nCode: https://github.com/SidhuK/TidyTuesday") +
theme() + theme(plot.subtitle = element_text(size = 10,
face = "bold", colour = "gray0", hjust = 0.5),
plot.caption = element_text(size = 7,
face = "italic", colour = "gray0"),
axis.ticks = element_line(colour = "gray0",
size = 0.9), panel.grid.major = element_line(colour = "gray96",
size = 0.4, linetype = "dashed"),
panel.grid.minor = element_line(size = 0.4,
linetype = "dashed"), axis.title = element_text(face = "bold"),
axis.text = element_text(family = "mono",
colour = "gray0"), plot.title = element_text(size = 18,
face = "bold", hjust = 0.5), panel.background = element_rect(fill = "antiquewhite2",
colour = "black", size = 1, linetype = "longdash"),
plot.background = element_rect(fill = "aliceblue",
colour = "black", size = 1.5, linetype = "solid"),
legend.position = "none") +labs(x = "Year")
plot
grid::grid.raster(ggplot_logo, x = 0.07, y = 0.03, just = c('left', 'bottom'), width = unit(0.35, 'inches'))
ggsave(
filename = "figures/2022_03_15.png",
device = "png",
dpi = "retina"
)
ggsave(
filename = "2022_03_15.png",
device = "png",
dpi = "retina"
)
